$date
	Thu Apr 10 01:08:57 2025
$end
$version
	Icarus Verilog
$end
$timescale
	1ns
$end
$scope module i2c_controller_tb $end
$var wire 1 ! i2c_sda $end
$var wire 1 " ready $end
$var wire 1 # i2c_scl $end
$var wire 8 $ data_out [7:0] $end
$var reg 7 % addr [6:0] $end
$var reg 1 & clk $end
$var reg 8 ' data_in [7:0] $end
$var reg 1 ( enable $end
$var reg 1 ) rst $end
$var reg 1 * rw $end
$scope module master $end
$var wire 7 + addr [6:0] $end
$var wire 1 & clk $end
$var wire 8 , data_in [7:0] $end
$var wire 1 ( enable $end
$var wire 1 ! i2c_sda $end
$var wire 1 ) rst $end
$var wire 1 * rw $end
$var wire 1 " ready $end
$var wire 1 # i2c_scl $end
$var parameter 32 - ADDRESS $end
$var parameter 32 . DIVIDE_BY $end
$var parameter 32 / IDLE $end
$var parameter 32 0 READ_ACK $end
$var parameter 32 1 READ_ACK2 $end
$var parameter 32 2 READ_DATA $end
$var parameter 32 3 START $end
$var parameter 32 4 STOP $end
$var parameter 32 5 WRITE_ACK $end
$var parameter 32 6 WRITE_DATA $end
$var reg 8 7 counter [7:0] $end
$var reg 8 8 counter2 [7:0] $end
$var reg 8 9 data_out [7:0] $end
$var reg 1 : i2c_clk $end
$var reg 1 ; i2c_scl_enable $end
$var reg 8 < saved_addr [7:0] $end
$var reg 8 = saved_data [7:0] $end
$var reg 1 > sda_out $end
$var reg 8 ? state [7:0] $end
$var reg 1 @ write_enable $end
$upscope $end
$scope module slave $end
$var wire 1 # i2c_scl $end
$var wire 1 ! i2c_sda $end
$var parameter 7 A ADDRESS $end
$var parameter 32 B READ_ADDR $end
$var parameter 32 C READ_DATA $end
$var parameter 32 D SEND_ACK $end
$var parameter 32 E SEND_ACK2 $end
$var parameter 32 F WRITE_DATA $end
$var reg 8 G addr [7:0] $end
$var reg 8 H counter [7:0] $end
$var reg 8 I data_in [7:0] $end
$var reg 8 J data_out [7:0] $end
$var reg 1 K sda_in $end
$var reg 1 L sda_out $end
$var reg 1 M start $end
$var reg 6 N state [5:0] $end
$var reg 1 O write_enable $end
$upscope $end
$upscope $end
$enddefinitions $end
$comment Show the parameter values. $end
$dumpall
b11 F
b100 E
b1 D
b10 C
b0 B
b101010 A
b100 6
b101 5
b1000 4
b1 3
b110 2
b111 1
b11 0
b0 /
b100 .
b10 -
$end
#0
$dumpvars
0O
b0 N
0M
0L
0K
b0 J
b0 I
b0 H
bx G
1@
b0 ?
1>
bx =
bx <
0;
1:
bx 9
b0 8
bx 7
bx ,
bx +
x*
1)
x(
bx '
0&
bx %
bx $
1#
0"
1!
$end
#10
b1 8
1&
#20
0&
#30
b0 8
0:
1&
#40
0&
#50
b1 8
1&
#60
0&
#70
b0 8
1:
1&
#80
0&
#90
b1 8
1&
#100
1"
0&
1(
0*
b11111111 '
b11111111 ,
b101010 %
b101010 +
0)
#110
b0 8
0:
1&
#120
0&
#130
b1 8
1&
#140
0&
#150
0"
b11111111 =
b1010100 <
b1 ?
b0 8
1:
1&
#160
0&
#170
b1 8
1&
#180
0&
#190
b111 H
1M
0!
0>
b0 8
0:
1&
#200
0&
0(
#210
b1 8
1&
#220
0&
#230
b10 ?
b111 7
b0 8
1:
1&
#240
0&
#250
b1 8
1&
#260
0&
#270
0#
1;
b0 8
0:
1&
#280
0&
#290
b1 8
1&
#300
0&
#310
b110 H
b0xxxxxxx G
b110 7
1#
b0 8
1:
1&
#320
0&
#330
b1 8
1&
#340
0&
#350
1!
1>
0#
b0 8
0:
1&
#360
0&
#370
b1 8
1&
#380
0&
#390
b101 H
b1xxxxxx G
b101 7
1#
b0 8
1:
1&
#400
0&
#410
b1 8
1&
#420
0&
#430
0!
0>
0#
b0 8
0:
1&
#440
0&
#450
b1 8
1&
#460
0&
#470
b100 H
b10xxxxx G
b100 7
1#
b0 8
1:
1&
#480
0&
#490
b1 8
1&
#500
0&
#510
1!
1>
0#
b0 8
0:
1&
#520
0&
#530
b1 8
1&
#540
0&
#550
b11 H
b101xxxx G
b11 7
1#
b0 8
1:
1&
#560
0&
#570
b1 8
1&
#580
0&
#590
0!
0>
0#
b0 8
0:
1&
#600
0&
#610
b1 8
1&
#620
0&
#630
b10 H
b1010xxx G
b10 7
1#
b0 8
1:
1&
#640
0&
#650
b1 8
1&
#660
0&
#670
1!
1>
0#
b0 8
0:
1&
#680
0&
#690
b1 8
1&
#700
0&
#710
b1 H
b10101xx G
b1 7
1#
b0 8
1:
1&
#720
0&
#730
b1 8
1&
#740
0&
#750
0!
0>
0#
b0 8
0:
1&
#760
0&
#770
b1 8
1&
#780
0&
#790
b0 H
b101010x G
b0 7
1#
b0 8
1:
1&
#800
0&
#810
b1 8
1&
#820
0&
#830
0#
b0 8
0:
1&
#840
0&
#850
b1 8
1&
#860
0&
#870
b1 N
b1010100 G
b11 ?
1#
b0 8
1:
1&
#880
0&
#890
b1 8
1&
#900
0&
#910
0!
1O
0@
0#
b0 8
0:
1&
#920
0&
#930
b1 8
1&
#940
0&
#950
b10 N
b111 H
b100 ?
b111 7
1#
b0 8
1:
1&
#960
0&
#970
b1 8
1&
#980
0&
#990
1!
0O
1>
1@
0#
b0 8
0:
1&
#1000
0&
1(
1*
#1010
b1 8
1&
#1020
0&
#1030
b110 H
b10000000 I
b110 7
1#
b0 8
1:
1&
#1040
0&
#1050
b1 8
1&
#1060
0&
#1070
0#
b0 8
0:
1&
#1080
0&
#1090
b1 8
1&
#1100
0&
#1110
b101 H
b11000000 I
b101 7
1#
b0 8
1:
1&
#1120
0&
#1130
b1 8
1&
#1140
0&
#1150
0#
b0 8
0:
1&
#1160
0&
#1170
b1 8
1&
#1180
0&
#1190
b100 H
b11100000 I
b100 7
1#
b0 8
1:
1&
#1200
0&
#1210
b1 8
1&
#1220
0&
#1230
0#
b0 8
0:
1&
#1240
0&
#1250
b1 8
1&
#1260
0&
#1270
b11 H
b11110000 I
b11 7
1#
b0 8
1:
1&
#1280
0&
#1290
b1 8
1&
#1300
0&
#1310
0#
b0 8
0:
1&
#1320
0&
#1330
b1 8
1&
#1340
0&
#1350
b10 H
b11111000 I
b10 7
1#
b0 8
1:
1&
#1360
0&
#1370
b1 8
1&
#1380
0&
#1390
0#
b0 8
0:
1&
#1400
0&
#1410
b1 8
1&
#1420
0&
#1430
b1 H
b11111100 I
b1 7
1#
b0 8
1:
1&
#1440
0&
#1450
b1 8
1&
#1460
0&
#1470
0#
b0 8
0:
1&
#1480
0&
#1490
b1 8
1&
#1500
0&
#1510
b0 H
b11111110 I
b0 7
1#
b0 8
1:
1&
#1520
0&
#1530
b1 8
1&
#1540
0&
#1550
0#
b0 8
0:
1&
#1560
0&
#1570
b1 8
1&
#1580
0&
#1590
b100 N
b11111111 I
b111 ?
1#
b0 8
1:
1&
#1600
0&
#1610
b1 8
1&
#1620
0&
#1630
x!
1O
0#
b0 8
0:
1&
#1640
0&
#1650
b1 8
1&
#1660
0&
#1670
b111 H
b0 N
b11111111 J
b1000 ?
1#
b0 8
1:
1&
#1680
0&
#1690
b1 8
1&
#1700
0&
#1710
b110 H
b11010100 G
0M
1!
0O
0;
1#
b0 8
0:
1&
#1720
0&
#1730
b1 8
1&
#1740
0&
#1750
1"
b0 ?
b0 8
1:
1&
#1760
0&
#1770
b1 8
1&
#1780
0&
#1790
b0 8
0:
1&
#1800
0&
#1810
b1 8
1&
#1820
0&
#1830
0"
b1010101 <
b1 ?
b0 8
1:
1&
#1840
0&
#1850
b1 8
1&
#1860
0&
#1870
b111 H
1M
0!
0>
b0 8
0:
1&
#1880
0&
#1890
b1 8
1&
#1900
0&
#1910
b10 ?
b111 7
b0 8
1:
1&
#1920
0&
#1930
b1 8
1&
#1940
0&
#1950
0#
1;
b0 8
0:
1&
#1960
0&
#1970
b1 8
1&
#1980
0&
#1990
b110 H
b1010100 G
b110 7
1#
b0 8
1:
1&
#2000
0&
0(
#2010
b1 8
1&
#2020
0&
#2030
1!
1>
0#
b0 8
0:
1&
#2040
0&
#2050
b1 8
1&
#2060
0&
#2070
b101 H
b101 7
1#
b0 8
1:
1&
#2080
0&
#2090
b1 8
1&
#2100
0&
#2110
0!
0>
0#
b0 8
0:
1&
#2120
0&
#2130
b1 8
1&
#2140
0&
#2150
b100 H
b100 7
1#
b0 8
1:
1&
#2160
0&
#2170
b1 8
1&
#2180
0&
#2190
1!
1>
0#
b0 8
0:
1&
#2200
0&
#2210
b1 8
1&
#2220
0&
#2230
b11 H
b11 7
1#
b0 8
1:
1&
#2240
0&
#2250
b1 8
1&
#2260
0&
#2270
0!
0>
0#
b0 8
0:
1&
#2280
0&
#2290
b1 8
1&
#2300
0&
#2310
b10 H
b10 7
1#
b0 8
1:
1&
#2320
0&
#2330
b1 8
1&
#2340
0&
#2350
1!
1>
0#
b0 8
0:
1&
#2360
0&
#2370
b1 8
1&
#2380
0&
#2390
b1 H
b1 7
1#
b0 8
1:
1&
#2400
0&
#2410
b1 8
1&
#2420
0&
#2430
0!
0>
0#
b0 8
0:
1&
#2440
0&
#2450
b1 8
1&
#2460
0&
#2470
b0 H
b0 7
1#
b0 8
1:
1&
#2480
0&
#2490
b1 8
1&
#2500
0&
#2510
1!
1>
0#
b0 8
0:
1&
#2520
0&
#2530
b1 8
1&
#2540
0&
#2550
b1 N
b1010101 G
b11 ?
1#
b0 8
1:
1&
#2560
0&
#2570
b1 8
1&
#2580
0&
#2590
0!
1O
0@
0#
b0 8
0:
1&
#2600
0&
#2610
b1 8
1&
#2620
0&
#2630
b11 N
b111 H
b110 ?
b111 7
1#
b0 8
1:
1&
#2640
0&
#2650
b1 8
1&
#2660
0&
#2670
1!
1L
0#
b0 8
0:
1&
#2680
0&
#2690
b1 8
1&
#2700
0&
#2710
b110 H
b110 7
b1xxxxxxx $
b1xxxxxxx 9
1#
b0 8
1:
1&
#2720
0&
#2730
b1 8
1&
#2740
0&
#2750
0#
b0 8
0:
1&
#2760
0&
#2770
b1 8
1&
#2780
0&
#2790
b101 H
b101 7
b11xxxxxx $
b11xxxxxx 9
1#
b0 8
1:
1&
#2800
0&
#2810
b1 8
1&
#2820
0&
#2830
0#
b0 8
0:
1&
#2840
0&
#2850
b1 8
1&
#2860
0&
#2870
b100 H
b100 7
b111xxxxx $
b111xxxxx 9
1#
b0 8
1:
1&
#2880
0&
#2890
b1 8
1&
#2900
0&
#2910
0#
b0 8
0:
1&
#2920
0&
#2930
b1 8
1&
#2940
0&
#2950
b11 H
b11 7
b1111xxxx $
b1111xxxx 9
1#
b0 8
1:
1&
#2960
0&
#2970
b1 8
1&
#2980
0&
#2990
0#
b0 8
0:
1&
#3000
0&
#3010
b1 8
1&
#3020
0&
#3030
b10 H
b10 7
b11111xxx $
b11111xxx 9
1#
b0 8
1:
1&
#3040
0&
#3050
b1 8
1&
#3060
0&
#3070
0#
b0 8
0:
1&
#3080
0&
#3090
b1 8
1&
#3100
0&
#3110
b1 H
b1 7
b111111xx $
b111111xx 9
1#
b0 8
1:
1&
#3120
0&
#3130
b1 8
1&
#3140
0&
#3150
0#
b0 8
0:
1&
#3160
0&
#3170
b1 8
1&
#3180
0&
#3190
b0 H
b0 7
b1111111x $
b1111111x 9
1#
b0 8
1:
1&
#3200
0&
#3210
b1 8
1&
#3220
0&
#3230
0#
b0 8
0:
1&
#3240
0&
#3250
b1 8
1&
#3260
0&
#3270
b0 N
b101 ?
b11111111 $
b11111111 9
1#
b0 8
1:
1&
#3280
0&
#3290
b1 8
1&
#3300
0&
#3310
0!
0O
0>
1@
0#
b0 8
0:
1&
#3320
0&
#3330
b1 8
1&
#3340
0&
#3350
b1 N
b1010100 G
b1000 ?
1#
b0 8
1:
1&
#3360
0&
#3370
b1 8
1&
#3380
0&
#3390
b111 H
0M
b10 N
1!
0O
0L
1>
0;
1#
b0 8
0:
1&
#3400
0&
#3410
b1 8
1&
#3420
0&
#3430
1"
b0 ?
b0 8
1:
1&
#3440
0&
#3450
b1 8
1&
#3460
0&
#3470
b0 8
0:
1&
#3480
0&
#3490
b1 8
1&
#3500
0&
#3510
b0 8
1:
1&
#3520
0&
#3530
b1 8
1&
#3540
0&
#3550
b0 8
0:
1&
#3560
0&
#3570
b1 8
1&
#3580
0&
#3590
b0 8
1:
1&
#3600
0&
#3610
b1 8
1&
#3620
0&
#3630
b0 8
0:
1&
#3640
0&
#3650
b1 8
1&
#3660
0&
#3670
b0 8
1:
1&
#3680
0&
#3690
b1 8
1&
#3700
0&
#3710
b0 8
0:
1&
#3720
0&
#3730
b1 8
1&
#3740
0&
#3750
b0 8
1:
1&
#3760
0&
#3770
b1 8
1&
#3780
0&
#3790
b0 8
0:
1&
#3800
0&
#3810
b1 8
1&
#3820
0&
#3830
b0 8
1:
1&
#3840
0&
#3850
b1 8
1&
#3860
0&
#3870
b0 8
0:
1&
#3880
0&
#3890
b1 8
1&
#3900
0&
#3910
b0 8
1:
1&
#3920
0&
#3930
b1 8
1&
#3940
0&
#3950
b0 8
0:
1&
#3960
0&
#3970
b1 8
1&
#3980
0&
#3990
b0 8
1:
1&
#4000
0&
#4010
b1 8
1&
#4020
0&
#4030
b0 8
0:
1&
#4040
0&
#4050
b1 8
1&
#4060
0&
#4070
b0 8
1:
1&
#4080
0&
#4090
b1 8
1&
#4100
0&
#4110
b0 8
0:
1&
#4120
0&
#4130
b1 8
1&
#4140
0&
#4150
b0 8
1:
1&
#4160
0&
#4170
b1 8
1&
#4180
0&
#4190
b0 8
0:
1&
#4200
0&
#4210
b1 8
1&
#4220
0&
#4230
b0 8
1:
1&
#4240
0&
#4250
b1 8
1&
#4260
0&
#4270
b0 8
0:
1&
#4280
0&
#4290
b1 8
1&
#4300
0&
#4310
b0 8
1:
1&
#4320
0&
#4330
b1 8
1&
#4340
0&
#4350
b0 8
0:
1&
#4360
0&
#4370
b1 8
1&
#4380
0&
#4390
b0 8
1:
1&
#4400
0&
#4410
b1 8
1&
#4420
0&
#4430
b0 8
0:
1&
#4440
0&
#4450
b1 8
1&
#4460
0&
#4470
b0 8
1:
1&
#4480
0&
#4490
b1 8
1&
#4500
0&
#4510
b0 8
0:
1&
#4520
0&
#4530
b1 8
1&
#4540
0&
#4550
b0 8
1:
1&
#4560
0&
#4570
b1 8
1&
#4580
0&
#4590
b0 8
0:
1&
#4600
0&
#4610
b1 8
1&
#4620
0&
#4630
b0 8
1:
1&
#4640
0&
#4650
b1 8
1&
#4660
0&
#4670
b0 8
0:
1&
#4680
0&
#4690
b1 8
1&
#4700
0&
#4710
b0 8
1:
1&
#4720
0&
#4730
b1 8
1&
#4740
0&
#4750
b0 8
0:
1&
#4760
0&
#4770
b1 8
1&
#4780
0&
#4790
b0 8
1:
1&
#4800
0&
#4810
b1 8
1&
#4820
0&
#4830
b0 8
0:
1&
#4840
0&
#4850
b1 8
1&
#4860
0&
#4870
b0 8
1:
1&
#4880
0&
#4890
b1 8
1&
#4900
0&
#4910
b0 8
0:
1&
#4920
0&
#4930
b1 8
1&
#4940
0&
#4950
b0 8
1:
1&
#4960
0&
#4970
b1 8
1&
#4980
0&
#4990
b0 8
0:
1&
#5000
0&
#5010
b1 8
1&
#5020
0&
#5030
b0 8
1:
1&
#5040
0&
#5050
b1 8
1&
#5060
0&
#5070
b0 8
0:
1&
#5080
0&
#5090
b1 8
1&
#5100
0&
#5110
b0 8
1:
1&
#5120
0&
#5130
b1 8
1&
#5140
0&
#5150
b0 8
0:
1&
#5160
0&
#5170
b1 8
1&
#5180
0&
#5190
b0 8
1:
1&
#5200
0&
#5210
b1 8
1&
#5220
0&
#5230
b0 8
0:
1&
#5240
0&
#5250
b1 8
1&
#5260
0&
#5270
b0 8
1:
1&
#5280
0&
#5290
b1 8
1&
#5300
0&
#5310
b0 8
0:
1&
#5320
0&
#5330
b1 8
1&
#5340
0&
#5350
b0 8
1:
1&
#5360
0&
#5370
b1 8
1&
#5380
0&
#5390
b0 8
0:
1&
#5400
0&
#5410
b1 8
1&
#5420
0&
#5430
b0 8
1:
1&
#5440
0&
#5450
b1 8
1&
#5460
0&
#5470
b0 8
0:
1&
#5480
0&
#5490
b1 8
1&
#5500
0&
#5510
b0 8
1:
1&
#5520
0&
#5530
b1 8
1&
#5540
0&
#5550
b0 8
0:
1&
#5560
0&
#5570
b1 8
1&
#5580
0&
#5590
b0 8
1:
1&
#5600
0&
#5610
b1 8
1&
#5620
0&
#5630
b0 8
0:
1&
#5640
0&
#5650
b1 8
1&
#5660
0&
#5670
b0 8
1:
1&
#5680
0&
#5690
b1 8
1&
#5700
0&
#5710
b0 8
0:
1&
#5720
0&
#5730
b1 8
1&
#5740
0&
#5750
b0 8
1:
1&
#5760
0&
#5770
b1 8
1&
#5780
0&
#5790
b0 8
0:
1&
#5800
0&
#5810
b1 8
1&
#5820
0&
#5830
b0 8
1:
1&
#5840
0&
#5850
b1 8
1&
#5860
0&
#5870
b0 8
0:
1&
#5880
0&
#5890
b1 8
1&
#5900
0&
#5910
b0 8
1:
1&
#5920
0&
#5930
b1 8
1&
#5940
0&
#5950
b0 8
0:
1&
#5960
0&
#5970
b1 8
1&
#5980
0&
#5990
b0 8
1:
1&
#6000
0&
#6010
b1 8
1&
#6020
0&
#6030
b0 8
0:
1&
#6040
0&
#6050
b1 8
1&
#6060
0&
#6070
b0 8
1:
1&
#6080
0&
#6090
b1 8
1&
#6100
0&
#6110
b0 8
0:
1&
#6120
0&
#6130
b1 8
1&
#6140
0&
#6150
b0 8
1:
1&
#6160
0&
#6170
b1 8
1&
#6180
0&
#6190
b0 8
0:
1&
#6200
0&
#6210
b1 8
1&
#6220
0&
#6230
b0 8
1:
1&
#6240
0&
#6250
b1 8
1&
#6260
0&
#6270
b0 8
0:
1&
#6280
0&
#6290
b1 8
1&
#6300
0&
#6310
b0 8
1:
1&
#6320
0&
#6330
b1 8
1&
#6340
0&
#6350
b0 8
0:
1&
#6360
0&
#6370
b1 8
1&
#6380
0&
#6390
b0 8
1:
1&
#6400
0&
#6410
b1 8
1&
#6420
0&
#6430
b0 8
0:
1&
#6440
0&
#6450
b1 8
1&
#6460
0&
#6470
b0 8
1:
1&
#6480
0&
#6490
b1 8
1&
#6500
0&
#6510
b0 8
0:
1&
#6520
0&
#6530
b1 8
1&
#6540
0&
#6550
b0 8
1:
1&
#6560
0&
#6570
b1 8
1&
#6580
0&
#6590
b0 8
0:
1&
#6600
0&
#6610
b1 8
1&
#6620
0&
#6630
b0 8
1:
1&
#6640
0&
#6650
b1 8
1&
#6660
0&
#6670
b0 8
0:
1&
#6680
0&
#6690
b1 8
1&
#6700
0&
#6710
b0 8
1:
1&
#6720
0&
#6730
b1 8
1&
#6740
0&
#6750
b0 8
0:
1&
#6760
0&
#6770
b1 8
1&
#6780
0&
#6790
b0 8
1:
1&
#6800
0&
#6810
b1 8
1&
#6820
0&
#6830
b0 8
0:
1&
#6840
0&
#6850
b1 8
1&
#6860
0&
#6870
b0 8
1:
1&
#6880
0&
#6890
b1 8
1&
#6900
0&
#6910
b0 8
0:
1&
#6920
0&
#6930
b1 8
1&
#6940
0&
#6950
b0 8
1:
1&
#6960
0&
#6970
b1 8
1&
#6980
0&
#6990
b0 8
0:
1&
#7000
0&
